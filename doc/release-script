#!/bin/bash
last="$1"
new="$2"
echo "sed 's,MODULE_VERSION,$new,g' META.json.in > META.json"
echo "git commit -a -m 'preparation for v$new' "
echo "git tag -s v$new"
echo "git archive --format=tar --prefix=openbarter-$new/ v$new | gzip -9 > ../openbarter-$new.tar.gz"
echo "# git archive --format zip --prefix=openbarter-$new/ v$new --output ../openbarter-$new.zip"
echo "cp doc/doc-ob.pdf ../openbarter-doc-$new.pdf"
echo "git log --no-merges v$new ^v$last > ../ChangeLog-$new"
echo "git shortlog --no-merges v$new ^v$last > ../ShortLog-$new"
echo "git diff --stat --summary -M v$last v$new > ../diffstat-$new"
