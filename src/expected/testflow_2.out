--drop extension if exists hstore cascade;
--create extension hstore;
drop extension if exists flowf cascade;
create extension flowf with version '1.1';
-- order limit
SELECT yflow_show('[(1,1,1,1,10,20,20,7.00),(1,2,2,1,10,20,20,7.00)]'::yflow); -- omega >1
                                      yflow_show                                       
---------------------------------------------------------------------------------------
 YFLOW [(1, 1, 1, 1, 10, 20, 20, 7.000000 :20),(1, 2, 2, 1, 10, 20, 20, 7.000000 :20)]+
 
(1 row)

SELECT yflow_show('[(1,1,1,1,20,20,20,7.00),(1,2,2,1,20,20,20,7.00)]'::yflow); -- omega =1
                                      yflow_show                                       
---------------------------------------------------------------------------------------
 YFLOW [(1, 1, 1, 1, 20, 20, 20, 7.000000 :20),(1, 2, 2, 1, 20, 20, 20, 7.000000 :20)]+
 
(1 row)

SELECT yflow_show('[(1,1,1,1,20,10,10,7.00),(1,2,2,1,20,10,10,7.00)]'::yflow); -- omega <1
                                      yflow_show                                       
---------------------------------------------------------------------------------------
 YFLOW [(1, 1, 1, 1, 20, 10, 10, 7.000000 :-1),(1, 2, 2, 1, 20, 10, 10, 7.000000 :-1)]+
 
(1 row)

-- order best
SELECT yflow_show('[(2,1,1,1,10,20,20,7.00),(2,2,2,1,10,20,20,7.00)]'::yflow); -- omega >1
                                      yflow_show                                       
---------------------------------------------------------------------------------------
 YFLOW [(2, 1, 1, 1, 10, 20, 20, 7.000000 :20),(2, 2, 2, 1, 10, 20, 20, 7.000000 :20)]+
 
(1 row)

SELECT yflow_show('[(2,1,1,1,20,20,20,7.00),(2,2,2,1,20,20,20,7.00)]'::yflow); -- omega =1
                                      yflow_show                                       
---------------------------------------------------------------------------------------
 YFLOW [(2, 1, 1, 1, 20, 20, 20, 7.000000 :20),(2, 2, 2, 1, 20, 20, 20, 7.000000 :20)]+
 
(1 row)

SELECT yflow_show('[(2,1,1,1,20,10,10,7.00),(2,2,2,1,20,10,10,7.00)]'::yflow); -- omega <1
                                      yflow_show                                       
---------------------------------------------------------------------------------------
 YFLOW [(2, 1, 1, 1, 20, 10, 10, 7.000000 :10),(2, 2, 2, 1, 20, 10, 10, 7.000000 :10)]+
 
(1 row)

-- order limit and best
SELECT yflow_show('[(1,1,1,1,20,10,10,7.00),(2,2,2,1,20,10,10,7.00)]'::yflow); -- omega <1
                                      yflow_show                                       
---------------------------------------------------------------------------------------
 YFLOW [(1, 1, 1, 1, 20, 10, 10, 7.000000 :-1),(2, 2, 2, 1, 20, 10, 10, 7.000000 :-1)]+
 
(1 row)

SELECT yflow_show('[(2,1,1,1,20,10,10,7.00),(1,2,2,1,20,10,10,7.00)]'::yflow); -- omega <1
                                      yflow_show                                       
---------------------------------------------------------------------------------------
 YFLOW [(2, 1, 1, 1, 20, 10, 10, 7.000000 :-1),(1, 2, 2, 1, 20, 10, 10, 7.000000 :-1)]+
 
(1 row)

-- order limit lnNoQttLimit (4+1+128)
SELECT yflow_show('[(1,1,1,1,10,20,100,7.00),(133,2,2,1,10,20,0,7.00)]'::yflow); -- omega >1
                                         yflow_show                                          
---------------------------------------------------------------------------------------------
 YFLOW [(1, 1, 1, 1, 10, 20, 100, 7.000000 :100),(133, 2, 2, 1, 10, 20, 100, 7.000000 :100)]+
 
(1 row)

-- order limit lnNoQttLimit+lnIgnoreOmega (8+4+1+128)
SELECT yflow_show('[(1,1,1,1,10,20,100,7.00),(141,2,2,1,0,0,0,7.00)]'::yflow); -- omega >1
                                         yflow_show                                         
--------------------------------------------------------------------------------------------
 YFLOW [(1, 1, 1, 1, 10, 20, 100, 7.000000 :100),(141, 2, 2, 1, 100, 50, 50, 7.000000 :50)]+
 
(1 row)

SELECT yflow_qtts('[(1,1,1,1,10,20,100,7.00),(141,2,2,1,0,0,0,7.00)]'::yflow); -- omega >1
     yflow_qtts     
--------------------
 {100,50,100,50,50}
(1 row)

